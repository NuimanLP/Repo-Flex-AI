# เนื้อหานำเสนอโครงการ MediaPipe Pose Detection

## 1. Technical Requirement

### ความต้องการของระบบ
1. ระบบการตรวจจับท่าทาง (Pose Detection)
   - ตรวจจับท่าทางแบบ Real-time ผ่านกล้อง
   - รองรับการประมวลผลภาพจากไฟล์และกล้องวิดีโอ
   - แสดงผลโครงกระดูกดิจิทัล (Digital Skeleton) แบบ real-time
   - รองรับการทำงานบน GPU (Metal สำหรับ macOS, CUDA สำหรับระบบอื่น)

2. ระบบวิเคราะห์ท่าทาง
   - ตรวจจับความถูกต้องของท่าทางการนั่ง/ยืน (ช่วงมุมที่ถูกต้อง: 60° - 105°)
   - คำนวณมุมระหว่างไหล่และสะโพก
   - แจ้งเตือนเมื่อท่าทางไม่ถูกต้อง
   - ตรวจจับการหกล้มและแจ้งเตือนฉุกเฉิน

3. ระบบแจ้งเตือน
   - แสดงผลแบบ Visual Feedback ด้วยสี (เขียว = ถูกต้อง, แดง = ไม่ถูกต้อง)
   - แจ้งเตือนด้วยเสียงเมื่อท่าทางไม่ถูกต้อง
   - แสดงสถานะการทำงานแบบ real-time
   - รายงานคุณภาพการตรวจจับ

4. ระบบการประมวลผลภาพแบบ Batch
   - รองรับการประมวลผลภาพคราวละหลายภาพ
   - ปรับความละเอียดภาพได้หลายระดับ (low, medium, hd, full_hd, custom)
   - บันทึกผลลัพธ์ที่มีการวิเคราะห์ท่าทางพร้อมคำอธิบาย

### คุณสมบัติที่ต้องการของระบบ
1. Hardware Requirements
   - กล้องเว็บแคมหรือกล้องวิดีโอ
   - การ์ดจอที่รองรับ GPU acceleration
   - ระบบเสียงสำหรับการแจ้งเตือน
   - หน่วยประมวลผลที่รองรับ Python และ MediaPipe

2. Software Requirements
   - Python 3.7 หรือสูงกว่า
   - MediaPipe v0.10.21
   - OpenCV v4.11.0
   - TensorFlow v2.19.0 (พร้อมกับ tensorflow-metal สำหรับ macOS)
   - PyGame สำหรับระบบเสียง
   - NumPy สำหรับการคำนวณ

## 2. System Block Diagram

```mermaid
graph TD
    A[ระบบรับภาพ] --> B[ระบบประมวลผลภาพ]
    B --> C[MediaPipe Core]
    C --> D[ระบบวิเคราะห์ท่าทาง]
    D --> E[ระบบแจ้งเตือน]
    D --> F[ระบบแสดงผล]
    
    subgraph ระบบรับภาพ
        A1[กล้องวิดีโอ/ไฟล์ภาพ]
        A2[การแปลงสี RGB]
        A3[การเตรียมเฟรม]
    end
    
    subgraph ระบบประมวลผล
        B1[GPU Acceleration]
        B2[การตรวจจับ Landmarks]
        B3[การประมวลผลความเชื่อมั่น]
    end
    
    subgraph ระบบวิเคราะห์
        D1[คำนวณมุมท่าทาง]
        D2[ตรวจสอบท่าทางที่ถูกต้อง]
        D3[ตรวจสอบการหกล้ม]
    end
    
    subgraph ระบบแจ้งเตือน
        E1[แสดงผลภาพ]
        E2[แจ้งเตือนเสียง]
        E3[รายงานสถานะ]
    end
    
    subgraph ระบบแสดงผล
        F1[วาดโครงกระดูกดิจิทัล]
        F2[แสดงมุมและสถานะ]
        F3[บันทึกผลลัพธ์]
    end
```

## 3. Design Diagram

### โครงสร้างซอฟต์แวร์
1. ส่วนการรับภาพและการตั้งค่า
   - รับภาพจากกล้องที่ความละเอียด 800x650 pixels
   - แปลงระบบสีเป็น RGB
   - เตรียมภาพสำหรับ MediaPipe
   - กำหนดค่า Model Path และการตั้งค่า GPU

2. ส่วนการประมวลผล MediaPipe
   - ใช้ MediaPipe Pose Landmarker
   - ตรวจจับจุด Landmarks 33 จุด
   - กำหนด Confidence Threshold (0.5-0.6)
   - ตั้งค่าโหมดการทำงาน (LIVE_STREAM หรือ IMAGE)

3. ส่วนการวิเคราะห์ท่าทาง
   - คำนวณมุมระหว่างไหล่และสะโพก (ใช้ฟังก์ชัน calculate_angle)
   - ตรวจสอบท่าทางที่ถูกต้องในช่วง 60°-105°
   - ตรวจจับการหกล้มจากตำแหน่งจมูกและมุมของไหล่

4. ส่วนการแสดงผล
   - วาดโครงกระดูกตามจุด Landmarks (ฟังก์ชัน draw_skeleton)
   - แสดงมุมท่าทางด้วย cv2.ellipse
   - แสดงข้อความสถานะและคำแนะนำ
   - แสดงผลการตรวจจับและสถานะ GPU

### รายละเอียดเทคนิค
1. การวาดโครงกระดูกดิจิทัล
   - ใช้การเชื่อมต่อ 14 เส้น (POSE_CONNECTIONS)
   - ใช้สีที่แตกต่างสำหรับจุดสำคัญ (จมูก, สะโพก)
   - ปรับความหนาของเส้นตามความสำคัญ

2. การคำนวณมุมท่าทาง
   - ใช้ฟังก์ชัน math.atan2 หรือ np.arctan2
   - คำนวณมุมระหว่างไหล่และสะโพก
   - แสดงผลมุมด้วยเส้นโค้ง (arc)

3. ระบบตรวจจับการหกล้ม
   - ตรวจสอบตำแหน่งจมูก (y > 0.8)
   - ตรวจสอบมุมแนวราบของไหล่ (< 30°)
   - แสดงการแจ้งเตือนและเล่นเสียงเมื่อตรวจพบ

## 4. แผนการดำเนินงาน

### งานที่เสร็จสิ้นแล้ว
1. พัฒนาระบบหลัก
   - ระบบตรวจจับท่าทางแบบ real-time
   - ระบบประมวลผลภาพแบบ batch
   - ระบบวิเคราะห์มุมท่าทาง
   - ระบบแจ้งเตือนด้วยภาพและเสียง
   - การทำงานบน GPU (Metal/CUDA)

2. การพัฒนาส่วนติดต่อผู้ใช้
   - การแสดงโครงกระดูกดิจิทัล
   - การแสดงมุมท่าทางแบบ visual
   - การแสดงสถานะระบบ
   - การแสดงคำแนะนำและการแจ้งเตือน

### งานที่กำลังดำเนินการ
1. การปรับปรุงประสิทธิภาพ
   - เพิ่มความแม่นยำในการตรวจจับท่าทาง
   - ปรับปรุงความเร็วในการประมวลผล
   - ลดการใช้ทรัพยากรระบบ
   - ปรับปรุงการทำงานบน hardware ที่หลากหลาย

2. การทดสอบระบบ
   - ทดสอบความแม่นยำในสภาพแวดล้อมต่างๆ
   - ทดสอบการทำงานกับผู้ใช้หลากหลายรูปร่าง
   - ทดสอบประสิทธิภาพบนอุปกรณ์ต่างๆ

### แผนงานในอนาคต
1. พัฒนาฟีเจอร์เพิ่มเติม
   - บันทึกข้อมูลท่าทางและสถิติ
   - วิเคราะห์แนวโน้มท่าทางในระยะยาว
   - เพิ่มการแจ้งเตือนผ่านมือถือและอีเมล
   - เพิ่มการตรวจจับท่าทางหลากหลายรูปแบบ

2. การพัฒนาเชิงพาณิชย์
   - พัฒนา API สำหรับการนำไปใช้งานภายนอก
   - สร้างระบบบริการบนคลาวด์
   - พัฒนาแอปพลิเคชันมือถือ
   - สร้างระบบติดตามและวิเคราะห์สำหรับองค์กร

## 5. กิจกรรมที่ดำเนินการแล้ว

1. การพัฒนาระบบหลัก
   - ติดตั้งและทดสอบ MediaPipe framework
   - พัฒนาระบบตรวจจับท่าทางแบบ real-time
   - พัฒนาระบบประมวลผลภาพแบบ batch
   - เพิ่มระบบวิเคราะห์มุมท่าทาง
   - พัฒนาระบบแจ้งเตือนด้วยภาพและเสียง

2. การทดสอบและปรับแต่ง
   - ทดสอบความแม่นยำในการตรวจจับท่าทาง
   - ปรับแต่งพารามิเตอร์ความเชื่อมั่น (confidence)
   - ทดสอบประสิทธิภาพ GPU บนระบบต่างๆ
   - ปรับแต่งช่วงมุมท่าทางที่ถูกต้อง
   - ทดสอบระบบตรวจจับการหกล้ม

3. การปรับปรุงระบบ
   - เพิ่มประสิทธิภาพการใช้งาน GPU
   - ปรับปรุงการแสดงผลโครงกระดูก
   - ปรับปรุงการคำนวณมุมท่าทาง
   - พัฒนาระบบแจ้งเตือนที่มีประสิทธิภาพ
   - ปรับปรุงการแสดงสถานะระบบ

4. การจัดทำเอกสาร
   - จัดทำคู่มือการใช้งานระบบ
   - จัดทำเอกสารการติดตั้งและการตั้งค่า
   - จัดทำตัวอย่างการใช้งานและคำแนะนำ
   - เตรียมเอกสารสำหรับการนำเสนอโครงการ

